<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loading CHAMPS data and understanding its structure • champs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Loading CHAMPS data and understanding its structure">
<meta property="og:description" content="champs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">champs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_intro.html">CHAMPS Introduction</a>
    </li>
    <li>
      <a href="../articles/download.html">Downloading CHAMPS data</a>
    </li>
    <li>
      <a href="../articles/data_load.html">Loading CHAMPS data and understanding its structure</a>
    </li>
    <li>
      <a href="../articles/usage.html">Computing summaries</a>
    </li>
    <li>
      <a href="../articles/plots_tables.html">Plots and tables</a>
    </li>
    <li>
      <a href="../articles/calc_deepdive.html">Deep dive into a calc function</a>
    </li>
    <li>
      <a href="../articles/custom_analyses_h_influenzae.html">Deep dive custom analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/EGHI-CHAMPS/champs-L2-statistics/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Loading CHAMPS data and understanding its structure</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/EGHI-CHAMPS/champs-L2-statistics/blob/master/vignettes/data_load.Rmd"><code>vignettes/data_load.Rmd</code></a></small>
      <div class="hidden name"><code>data_load.Rmd</code></div>

    </div>

    
    
<p>After registering with CHAMPS and downloading the data as described in <a href="download.html">Downloading CHAMPS Data</a>, this data can be read into a format suitable for anaysis in R using the <code><a href="../reference/load_data.html">load_data()</a></code> function.</p>
<div id="load_data" class="section level1">
<h1 class="hasAnchor">
<a href="#load_data" class="anchor"></a>load_data()</h1>
<p><code><a href="../reference/load_data.html">load_data()</a></code> is called by providing the location of the folder containing the de-identified dataset csv files. It reads in each csv file and does some minimal processing to make data handling and analysis easier in R, but with the variables staying as true to the downloaded files as possible. It also provides some alternate data structures for some of the tables that make certain analyses easier.</p>
<p>Suppose we have downloaded the csv files available in a directory <code>~/Downloads/CHAMPS_de_identified_data_2020-08-01</code>. We can load these data and assign it to a variable called <code>d</code> (you can choose whatever variable name you wish) with the following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/EGHI-CHAMPS/champs-L2-statistics">champs</a></span>)

<span class="kw">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_data.html">load_data</a></span>(<span class="st">"~/Downloads/CHAMPS_de_identified_data_2020-08-01"</span>)
<span class="co">#&gt; Reading CHAMPS_dataset_version.csv...</span>
<span class="co">#&gt; Reading CHAMPS_deid_basic_demographics.csv...</span>
<span class="co">#&gt; Reading CHAMPS_deid_decode_results.csv...</span>
<span class="co">#&gt; Reading CHAMPS_deid_lab_results.csv...</span>
<span class="co">#&gt; Reading CHAMPS_deid_tac_results.csv...</span>
<span class="co">#&gt; Reading CHAMPS_deid_verbal_autopsy.csv...</span>
<span class="co">#&gt; Reading CHAMPS_ICD_Mappings.csv...</span>
<span class="co">#&gt; Reading CHAMPS_icd10_descriptions.csv...</span>
<span class="co">#&gt; Reading CHAMPS_vocabulary.csv...</span>
<span class="co">#&gt; CHAMPS De-Identified Dataset v4.1 (2020-08-01)</span>
</pre></div>
<p>As output, <code><a href="../reference/load_data.html">load_data()</a></code> returns a list of data frames of each of the input tables along with long versions of the DeCoDe and TAC tables.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw">d</span>
<span class="co">#&gt; List of 11</span>
<span class="co">#&gt;  $ version : tibble [1 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ dmg     : tibble [1,476 × 39] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ dcd     : tibble [1,476 × 66] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ lab     : tibble [1,474 × 185] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ tac     : tibble [1,473 × 325] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ va      : tibble [1,389 × 456] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ icd_map : tibble [649 × 2] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ icd_desc: tibble [14,337 × 2] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ vocab   : tibble [2,306 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ tac_long: tibble [477,252 × 6] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ dcd_long: tibble [44,280 × 5] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  - attr(*, "class")= chr [1:2] "champs_data" "list"</span>
</pre></div>
<p>These data frames map to the input csv files or to each other as follows:</p>
<ul>
<li>
<code>version</code>: represents the data in <code>CHAMPS_dataset_version.csv</code>
</li>
<li>
<code>dmg</code>: represents the data in <code>CHAMPS_deid_basic_demographics.csv</code>
</li>
<li>
<code>dcd</code>: represents the data in <code>CHAMPS_deid_decode_results.csv</code>
</li>
<li>
<code>lab</code>: represents the data in <code>CHAMPS_deid_lab_results.csv</code>
</li>
<li>
<code>tac</code>: represents the data in <code>CHAMPS_deid_tac_results.csv</code>
</li>
<li>
<code>va</code>: represents the data in <code>CHAMPS_deid_verbal_autopsy.csv</code>
</li>
<li>
<code>icd_map</code>: represents the data in <code>CHAMPS_ICD_Mappings.csv</code>
</li>
<li>
<code>icd_desc</code>: represents the data in <code>CHAMPS_icd10_descriptions.csv</code>
</li>
<li>
<code>vocab</code>: represents the data in <code>CHAMPS_vocabulary.csv</code>
</li>
<li>
<code>tac_long</code>: a long-form representation of data in <code>tac</code>
</li>
<li>
<code>dcd_long</code>: a long-form representation of data in <code>dcd</code>
</li>
</ul>
<p>The row and column counts may differ depending on the version of the dataset you are working with.</p>
<p>You can access each of these tables for further inspection or use in specific analyses with <code>d$dmg</code>, <code>d$dcd</code>, etc.</p>
<p>The object containing all of the tables, which here we named <code>d</code>, will be used as the primary argument to all of the computation functions, as described in <a href="usage.html">this article</a>.</p>
<p>It is highly recommended that new users to CHAMPS data thoroughly read the dataset description that comes with the downloaded data to get a better understanding of what these different tables mean. We also recommend reading the <a href="data_intro.html">Intro to CHAMPS data</a> article.</p>
</div>
<div id="load_data-details" class="section level1">
<h1 class="hasAnchor">
<a href="#load_data-details" class="anchor"></a><code>load_data()</code> details</h1>
<p>The remainder of this article provides details about all of the processing and transformations that occur when calling <code><a href="../reference/load_data.html">load_data()</a></code>.</p>
<p>At a high level, <code><a href="../reference/load_data.html">load_data()</a></code> makes the following changes to the data as it reads in the csv files:</p>
<ul>
<li>All variables names are converted to “snake case” (all lower case with special characters and spaces replaced with <code>_</code>).</li>
<li>The verbal autopsy data has two columns that are timestamps without dates (e.g. HH:MM:SS) but <code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv()</a></code> defaults to reading them in as dates and has difficulty parsing them. We have processed them as characters.</li>
<li>The demographics data has a few changes:
<ul>
<li>Four columns have been added: <code>site</code>, <code>pmi_range</code>, <code>acquired24</code>, <code>acquired48</code>.</li>
<li>Three columns are transformed to factors: <code>age_group</code>, <code>age_subgroup</code>, and <code>site</code> (see description below).</li>
</ul>
</li>
<li>Two Long Format tables are created from the TAC and DeCoDe tables (see description below).</li>
</ul>
<div id="champs_deid_basic_demographics-dmg" class="section level2">
<h2 class="hasAnchor">
<a href="#champs_deid_basic_demographics-dmg" class="anchor"></a>CHAMPS_deid_basic_demographics (dmg)</h2>
<div id="new-demographic-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#new-demographic-variables" class="anchor"></a>New demographic variables</h3>
<p>The demographic data provides ISO country site codes. We add a <code>site</code> variable built from <code>site_iso_code</code> that is a factor with levels: Bangladesh, Kenya, Mali, Mozambique, South Africa, Ethiopia, Sierra Leone.</p>
<p>We also add a categorical postmortem interval range (<code>pmi_range</code>) variable based on the <code>calc_postmortem_hrs</code> variable. <code>pmi_range</code> had nine levels - “0 to 3”, “4 to 6”, “7 to 9”, “10 to 12”, “13 to 15”, “16 to 18”, “19 to 21”, “22 to 24”, “Over 24h”. This represents time between death and the MITS procedure and collection of specimens.</p>
<p>Finally, we add two new variables that represent if the case pathogens were acquired from the community or during their hospital stay, <code>acquired24</code> and <code>acquired48</code>, depending on the length of hospitalization before death. If the location of death was in the community, or death was a stillbirth or in the first 24 hours of life or a hospital stay was less than 24 hours then <code>acquired24 = "Community"</code>. If the location of death was in the community or death was a stillbirth or in the first 24 hours or a hospital stay less than 48 hours yields <code>acquired48 = "Community"</code>. All other values in both variables were marked “Facility”. A limitation for this variable is that it only considers a hospitalization immediately preceding death and does not capture hospitalizations with a discharge prior to death.</p>
</div>
<div id="demographic-factors" class="section level3">
<h3 class="hasAnchor">
<a href="#demographic-factors" class="anchor"></a>Demographic factors</h3>
<p>The demographic data has two age group variables - <code>age_group</code> and <code>age_group_subcat</code>. The <code>age_group</code> variable is converted to an ordered factor with factor levels following the natural order of age:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span>(<span class="kw">d</span><span class="op">$</span><span class="kw">dmg</span><span class="op">$</span><span class="kw">age_group</span>)                                                         
<span class="co">#&gt; [1] "Stillbirth"                              </span>
<span class="co">#&gt; [2] "Death in the first 24 hours"             </span>
<span class="co">#&gt; [3] "Early Neonate (1 to 6 days)"             </span>
<span class="co">#&gt; [4] "Late Neonate (7 to 27 days)"             </span>
<span class="co">#&gt; [5] "Infant (28 days to less than 12 months)" </span>
<span class="co">#&gt; [6] "Child (12 months to less than 60 Months)"</span>
</pre></div>
<p>The <code>age_group_subcat</code> variable provides a further partitioning of the “Infant” and “Early Neonate” categories as found in <code>age_group</code>.</p>
<p>In the raw data, there are four values recorded for <code>age_group_subcat</code> which we converted to have descriptions that are similar to <code>age_group</code>.</p>
<table class="table">
<thead><tr class="header">
<th>Original</th>
<th>New</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>infant_&gt;6M</td>
<td>Infant (6 months to less than 12 months)</td>
</tr>
<tr class="even">
<td>infant_6M</td>
<td>Infant (28 days to less than 6 months)</td>
</tr>
<tr class="odd">
<td>neonate_72h</td>
<td>Early Neonate (24-72 hours)</td>
</tr>
<tr class="even">
<td>neonate_&gt;72h</td>
<td>Early Neonate (72+hrs to 6 days)</td>
</tr>
</tbody>
</table>
<p>All other values of <code>age_group_subcat</code> are missing in the raw data. We replace these missing values with the corresponding values provided in <code>age_group</code>. This gives us an updated <code>age_group_subcat</code> variable with the following levels:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span>(<span class="kw">d</span><span class="op">$</span><span class="kw">dmg</span><span class="op">$</span><span class="kw">age_group_subcat</span>)                                                  
<span class="co">#&gt; [1] "Stillbirth"</span>
<span class="co">#&gt; [2] "Death in the first 24 hours"</span>
<span class="co">#&gt; [3] "Early Neonate (24-72 hours)"</span>
<span class="co">#&gt; [4] "Early Neonate (72+hrs to 6 days)"</span>
<span class="co">#&gt; [5] "Late Neonate (7 to 27 days)"</span>
<span class="co">#&gt; [6] "Infant (28 days to less than 6 months)"</span>
<span class="co">#&gt; [7] "Infant (6 months to less than 12 months)"</span>
<span class="co">#&gt; [8] "Child (12 months to less than 60 Months)"</span>
</pre></div>
</div>
</div>
<div id="long-format-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#long-format-tables" class="anchor"></a>Long format tables</h2>
<p>The <code>tac_long</code> and <code>dcd_long</code> data frames are long-format transformed versions of the wide-formatted <code>tac</code> and <code>dcd</code> data frames with additional description columns added to clarify the coded column names.</p>
<div id="tac_long" class="section level3">
<h3 class="hasAnchor">
<a href="#tac_long" class="anchor"></a>tac_long</h3>
<p>The <code>tac</code> data frame provided in the raw data contains one row per case and one column per TAC assay result. There are 325 columns with names such as <code>bld_abau_1</code>, <code>bld_adev_1</code>, etc., indicating the specimen type and assay.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">d</span><span class="op">$</span><span class="kw">tac</span>                                                                           
<span class="co">#&gt; # A tibble: 1,473 x 325</span>
<span class="co">#&gt;    champs_deid bld_abau_1 bld_adev_1 bld_bart_1 bld_bruc_1 bld_bups_1 bld_caal_1</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     </span>
<span class="co">#&gt;  1 AB032461-9… Negative   Negative   Negative   Negative   Negative   Negative  </span>
<span class="co">#&gt;  2 46B7C6E7-2… Negative   Negative   Negative   Negative   Negative   Negative  </span>
<span class="co">#&gt;  3 3791BBA8-4… Negative   Negative   Negative   Negative   Negative   Positive  </span>
<span class="co">#&gt; # … with 1,470 more rows, and 318 more variables: bld_cchf_1 &lt;chr&gt;,</span>
</pre></div>
<p>An alternate long-format representation of this data can be more convenient for various analyses. In the long format, we have one row for every case and TAC assay combination and columns providing information about the TAC assay, namely its <code>specimen_type</code>, <code>target</code>, <code>pathogen</code>, and the <code>result</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="kw">d</span><span class="op">$</span><span class="kw">tac_long</span>                                                                      
<span class="co">#&gt; # A tibble: 477,252 x 6</span>
<span class="co">#&gt;    champs_deid           name    result  specimen_type target pathogen              </span>
<span class="co">#&gt;    &lt;chr&gt;                 &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;                 </span>
<span class="co">#&gt;  1 AB032461-9D11-4391-A… bld_ab… Negati… Whole blood   ABAU_1 Acinetobacter baumann…</span>
<span class="co">#&gt;  2 AB032461-9D11-4391-A… bld_ad… Negati… Whole blood   ADEV_1 Adenovirus            </span>
<span class="co">#&gt;  3 AB032461-9D11-4391-A… bld_ba… Negati… Whole blood   BART_1 Bartonella spp.       </span>
<span class="co">#&gt; # … with 477,249 more rows</span>
</pre></div>
<p>Note that <code>specimen_type</code> is derived from the text preceding the first "_" in the original variable names. The <code>pathogen</code> value is found in a lookup table that is available in the dataset description PDF file that comes with the data download, and which is made available in this R package as a dataset <code>tac_table</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="kw">tac_table</span>
<span class="co">#&gt; # A tibble: 128 x 3</span>
<span class="co">#&gt;    code   assay                   gene_target     </span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;                   &lt;chr&gt;           </span>
<span class="co">#&gt;  1 ABAU_1 Acinetobacter baumannii OXA-51          </span>
<span class="co">#&gt;  2 ADEV_1 Adenovirus              hexon           </span>
<span class="co">#&gt;  3 AD4X_1 Adenovirus 40/41        fiber protein   </span>
<span class="co">#&gt; # … with 125 more rows</span>
</pre></div>
<p>The <code>pathogen</code> variable is often much more useful for searching for specific TAC results, as you can search by a pathogen name (e.g. “Acinetobacter baumannii”) rather than parsing out the TAC assay code (e.g. “ABAU_1”).</p>
</div>
<div id="dcd_long" class="section level3">
<h3 class="hasAnchor">
<a href="#dcd_long" class="anchor"></a>dcd_long</h3>
<p>Similar to the TAC dataset, the DeCoDe dataset in its raw form has one row per case and many columns.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="kw">d</span><span class="op">$</span><span class="kw">dcd</span>
<span class="co">#&gt; # A tibble: 1,476 x 66</span>
<span class="co">#&gt;    champs_deid immediate_cod ic_champs_group… underlying_cause uc_champs_group…</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt;  1 56550401-2… P07.1         Neonatal preter… P36.1            Neonatal sepsis </span>
<span class="co">#&gt;  2 BA74FEEB-7… P20           Perinatal asphy… P36.8            Neonatal sepsis </span>
<span class="co">#&gt; # … with 1,474 more rows, and 61 more variables:</span>
<span class="co">#&gt; #   main_maternal_disease_condition &lt;chr&gt;, morbid_condition_01 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_cond_01_champs_group_desc &lt;chr&gt;, morbid_condition_02 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_cond_02_champs_group_desc &lt;chr&gt;, morbid_condition_03 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_cond_03_champs_group_desc &lt;chr&gt;, morbid_condition_04 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_cond_04_champs_group_desc &lt;chr&gt;, morbid_condition_05 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_cond_05_champs_group_desc &lt;chr&gt;, morbid_condition_06 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   morbid_cond_06_champs_group_desc &lt;lgl&gt;, morbid_condition_07 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   morbid_cond_07_champs_group_desc &lt;lgl&gt;, morbid_condition_08 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   morbid_cond_08_champs_group_desc &lt;lgl&gt;, other_maternal_condition_01 &lt;chr&gt;,</span>
<span class="co">#&gt; #   other_maternal_condition_02 &lt;chr&gt;, other_maternal_condition_03 &lt;chr&gt;,</span>
<span class="co">#&gt; #   other_maternal_condition_04 &lt;chr&gt;, other_significant_condition_01 &lt;chr&gt;,</span>
<span class="co">#&gt; #   other_significant_condition_02 &lt;chr&gt;, other_significant_condition_03 &lt;chr&gt;,</span>
<span class="co">#&gt; #   other_significant_condition_04 &lt;chr&gt;, other_significant_condition_05 &lt;chr&gt;,</span>
<span class="co">#&gt; #   other_significant_condition_06 &lt;chr&gt;, other_significant_condition_07 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   other_significant_condition_08 &lt;lgl&gt;, other_significant_condition_09 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   other_significant_condition_10 &lt;lgl&gt;, immediate_cause_of_death_etiol1 &lt;chr&gt;,</span>
<span class="co">#&gt; #   immediate_cause_of_death_etiol2 &lt;chr&gt;, immediate_cause_of_death_etiol3 &lt;chr&gt;,</span>
<span class="co">#&gt; #   underlying_cause_factor_etiol1 &lt;chr&gt;, underlying_cause_factor_etiol2 &lt;chr&gt;,</span>
<span class="co">#&gt; #   underlying_cause_factor_etiol3 &lt;chr&gt;, morbid_condition_01_etiol1 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_condition_01_etiol2 &lt;chr&gt;, morbid_condition_01_etiol3 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_condition_02_etiol1 &lt;chr&gt;, morbid_condition_02_etiol2 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_condition_02_etiol3 &lt;chr&gt;, morbid_condition_03_etiol1 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_condition_03_etiol2 &lt;chr&gt;, morbid_condition_03_etiol3 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_condition_04_etiol1 &lt;chr&gt;, morbid_condition_04_etiol2 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   morbid_condition_04_etiol3 &lt;lgl&gt;, morbid_condition_05_etiol1 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_condition_05_etiol2 &lt;chr&gt;, morbid_condition_05_etiol3 &lt;chr&gt;,</span>
<span class="co">#&gt; #   morbid_condition_06_etiol1 &lt;lgl&gt;, morbid_condition_06_etiol2 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   morbid_condition_06_etiol3 &lt;lgl&gt;, morbid_condition_07_etiol1 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   morbid_condition_07_etiol2 &lt;lgl&gt;, morbid_condition_07_etiol3 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   morbid_condition_08_etiol1 &lt;lgl&gt;, morbid_condition_08_etiol2 &lt;lgl&gt;,</span>
<span class="co">#&gt; #   morbid_condition_08_etiol3 &lt;lgl&gt;</span>
</pre></div>
<p>For each case, information about the causes of death determined by the DeCoDe panel can be found. These are available as CHAMPS group descriptions (ending with <code>_champs_group_desc</code>) and etiologies (ending with <code>_etiol</code>) if applicable. Immediate and underlying causes of death, along with morbid conditions, are classified as ICD10 codes, CHAMPS group descriptions, and with etiologies depending on the causes. The Other significant conditions are only classified as ICD10 codes at this time in the dataset.</p>
<p>Similar to what was done with the TAC long table, a long version of the DeCoDe table can be convenient for many analyses. We pivoted the data to long format such that there is one row per each etiology (1-3) and “type” of variable (immediate, underlying, morbid_condition_0*), with the corresponding CHAMPS group descriptions being repeated for each type.</p>
<p>Let’s take a glimpse at the data for one case in long form:</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="kw">dplyr</span>::<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">d</span><span class="op">$</span><span class="kw">dcd_long</span>, <span class="kw">champs_deid</span> <span class="op">==</span> <span class="kw">d</span><span class="op">$</span><span class="kw">dcd_long</span><span class="op">$</span><span class="kw">champs_deid</span>[<span class="fl">1500</span>]) 
<span class="co">#&gt; # A tibble: 30 x 5</span>
<span class="co">#&gt;    champs_deid        champs_group_desc       type     etiol          etiol_num</span>
<span class="co">#&gt;    &lt;chr&gt;              &lt;chr&gt;                   &lt;chr&gt;    &lt;chr&gt;              &lt;int&gt;</span>
<span class="co">#&gt;  1 FF205E2D-7F81-4A…  Neonatal sepsis         immedi…  Escherichia c…         1</span>
<span class="co">#&gt;  2 FF205E2D-7F81-4A…  Neonatal sepsis         immedi…  NA                     2</span>
<span class="co">#&gt;  3 FF205E2D-7F81-4A…  Neonatal sepsis         immedi…  NA                     3</span>
<span class="co">#&gt;  4 FF205E2D-7F81-4A…  Lower respiratory inf…  underl…  Escherichia c…         1</span>
<span class="co">#&gt;  5 FF205E2D-7F81-4A…  Lower respiratory inf…  underl…  NA                     2</span>
<span class="co">#&gt;  6 FF205E2D-7F81-4A…  Lower respiratory inf…  underl…  NA                     3</span>
<span class="co">#&gt;  7 FF205E2D-7F81-4A…  Meningitis/Encephalit…  morbid…  Escherichia c…         1</span>
<span class="co">#&gt;  8 FF205E2D-7F81-4A…  Meningitis/Encephalit…  morbid…  NA                     2</span>
<span class="co">#&gt;  9 FF205E2D-7F81-4A…  Meningitis/Encephalit…  morbid…  NA                     3</span>
<span class="co">#&gt; 10 FF205E2D-7F81-4A…  NA                      morbid…  NA                     1</span>
<span class="co">#&gt; # … with 20 more rows</span>
</pre></div>
<p>Here we see that this case has an immediate CHAMPS group description of “Neonatal sepsis” with an etiology of “Escherichia coli”, and an underlying CHAMPS group description of “Lower respiratory infections”. The long format provides us with a more convenient way to search for specific CHAMPS group descriptions or etiologies, in that we can search for a term in one column rather than across many columns.</p>
<p>Note that for a given case and type, whenever a <code>champs_group_desc</code> and <code>etiol</code> are all <code>NA</code>, we omit that data.</p>
<!-- We have kept the `NA` values for the three `etiol` in the long format table for any `champs_group_desc` with a value. Users can filter to the `dcd_pivot` table to exclude all `etiol`'s that are `NA` but should be cautious to keep the first `etiol` whether or not it is `NA` for table calculations related to `champs_group desc` and `type`. -->
</div>
</div>
<div id="table-formats" class="section level2">
<h2 class="hasAnchor">
<a href="#table-formats" class="anchor"></a>Table formats</h2>
<p>This package leverages many of the paradigms and packages of the <a href="https://www.tidyverse.org/">Tidyverse</a>. One of the most apparent elements involves the use of <a href="https://tibble.tidyverse.org/">tibbles</a>. They explain:</p>
<blockquote>
<p>A tibble, or tbl_df, is a modern reimagining of the data.frame, keeping what time has proven to be effective, and throwing out what is not. Tibbles also have an enhanced print() method, which makes them easier to use with large datasets containing complex objects.</p>
</blockquote>
<p>If you are uncomfortable with the tibble print format, you can use the following code to convert all the objects to only data.frame.</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="kw">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="kw">d</span>, <span class="kw">data.frame</span>)
</pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ryan Hafen, J Hathaway.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
