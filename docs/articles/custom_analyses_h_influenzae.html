<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deep dive custom analysis • champs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Deep dive custom analysis">
<meta property="og:description" content="champs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">champs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_intro.html">CHAMPS Introduction</a>
    </li>
    <li>
      <a href="../articles/download.html">Downloading CHAMPS data</a>
    </li>
    <li>
      <a href="../articles/data_load.html">Loading CHAMPS data and understanding its structure</a>
    </li>
    <li>
      <a href="../articles/usage.html">Computing summaries</a>
    </li>
    <li>
      <a href="../articles/plots_tables.html">Plots and tables</a>
    </li>
    <li>
      <a href="../articles/calc_deepdive.html">Deep dive into a calc function</a>
    </li>
    <li>
      <a href="../articles/custom_analyses_h_influenzae.html">Deep dive custom analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/EGHI-CHAMPS/champs-L2-statistics/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Deep dive custom analysis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/EGHI-CHAMPS/champs-L2-statistics/blob/master/vignettes/custom_analyses_h_influenzae.Rmd"><code>vignettes/custom_analyses_h_influenzae.Rmd</code></a></small>
      <div class="hidden name"><code>custom_analyses_h_influenzae.Rmd</code></div>

    </div>

    
    
<p>This article provides an example of a custom analysis that an analyst might need to carry out at the request of a researcher.</p>
<div id="researcher-request" class="section level2">
<h2 class="hasAnchor">
<a href="#researcher-request" class="anchor"></a>Researcher request</h2>
<p>We want <strong>to determine the proportion of cases where <em>Haemophilus influenzae</em> type B is in the causal chain of death</strong>. The CHAMPS TAC assays data for <em>H. influenzae</em> includes a target found in all serotypes (<code>HIAT_1</code> or “Haemophilus influenzae”) as well as a target found in serotypes A and B (<code>HITB_2</code> or “Haemophilus influenzae type B”). The combination of Negative and Positive results result in the following interpretation;</p>
<table class="table">
<thead><tr class="header">
<th><strong>HIAT_1</strong></th>
<th><strong>HITB_2</strong></th>
<th><strong>Interpretation</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Positive</td>
<td>Negative</td>
<td>
<em>H. influenzae</em> serotype A,B,C,D,E,F, or NT</td>
</tr>
<tr class="even">
<td>Positive</td>
<td>Positive</td>
<td>
<em>H. influenzae</em> serotype A or B</td>
</tr>
<tr class="odd">
<td>Negative</td>
<td>Positive</td>
<td>
<em>H. influenzae</em> serotype A or B</td>
</tr>
<tr class="even">
<td>Negative</td>
<td>Negative</td>
<td>Negative for <em>H. influenzae</em>
</td>
</tr>
</tbody>
</table>
<p>The DeCoDe panel determines each case’s causal result in the <code>dcd</code> data, and they cannot wholly rule-out <em>H. influenzae type A</em> even if the <em>H. influenzae type B</em> test result is positive. Because of this, they will record the case as <em>H. influenzae</em> without specifying type B (HiB). We want to use the CHAMPS data to estimate the count of cases that may be true HiB by finding the cases where <em>H. influenzae</em> is an etiology in the causal chain (<code>dcd</code>), and any positive result for <code>HITB_2</code> is in any specimen (<code>tac</code>).</p>
</div>
<div id="using-champs-data-with-the-champs-package" class="section level2">
<h2 class="hasAnchor">
<a href="#using-champs-data-with-the-champs-package" class="anchor"></a>Using CHAMPS data with the champs package</h2>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/EGHI-CHAMPS/champs-L2-statistics">champs</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org">dplyr</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://stringr.tidyverse.org">stringr</a></span>)
<span class="kw">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_data.html">load_data</a></span>(<span class="st">"CHAMPS_de_identified_data"</span>)
</pre></div>
<p>Let’s use the <code>tac_long</code> data to make sure we understand the target in the test and which specimen types exist for <em>influenzae</em>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw">d</span><span class="op">$</span><span class="kw">tac_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span>(<span class="kw">name</span>), <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(<span class="kw">name</span>, <span class="st">"hiat|hitb"</span>)) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span><span class="kw">champs_deid</span>, <span class="op">-</span><span class="kw">result</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw">target</span>) <span class="op">%&gt;%</span>
  <span class="kw">knitr</span>::<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(format = <span class="st">"markdown"</span>)
</pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="42%">
<col width="7%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">specimen_type</th>
<th align="left">target</th>
<th align="left">pathogen</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">bld_hiat_1</td>
<td align="left">Whole blood</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="even">
<td align="left">bld_sp_hiat_1</td>
<td align="left">Plasma or spun blood specimen</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="odd">
<td align="left">csf_hiat_1</td>
<td align="left">Cerebrospinal fluid sample</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="even">
<td align="left">lung_hiat_1</td>
<td align="left">Tissue specimen from lung</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="odd">
<td align="left">np_op_hiat_1</td>
<td align="left">Nasopharyngeal and Oropharyngeal swab</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="even">
<td align="left">bld_hitb_2</td>
<td align="left">Whole blood</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
<tr class="odd">
<td align="left">bld_sp_hitb_2</td>
<td align="left">Plasma or spun blood specimen</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
<tr class="even">
<td align="left">csf_hitb_2</td>
<td align="left">Cerebrospinal fluid sample</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
<tr class="odd">
<td align="left">lung_hitb_2</td>
<td align="left">Tissue specimen from lung</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
<tr class="even">
<td align="left">np_op_hitb_2</td>
<td align="left">Nasopharyngeal and Oropharyngeal swab</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
</tbody>
</table>
<p>Are there any other pathogen names that we may be missing that are <em>influenzea</em>?</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="kw">d</span><span class="op">$</span><span class="kw">tac_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span>(<span class="kw">name</span>), <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(<span class="kw">pathogen</span>, <span class="st">"influenzae"</span>)) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span><span class="kw">champs_deid</span>, <span class="op">-</span><span class="kw">result</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw">target</span>) <span class="op">%&gt;%</span>
  <span class="kw">knitr</span>::<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(format = <span class="st">"markdown"</span>)
</pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="42%">
<col width="7%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">specimen_type</th>
<th align="left">target</th>
<th align="left">pathogen</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">bld_hflu_1</td>
<td align="left">Whole blood</td>
<td align="left">HFLU_1</td>
<td align="left">H. influenzae</td>
</tr>
<tr class="even">
<td align="left">bld_sp_hflu_1</td>
<td align="left">Plasma or spun blood specimen</td>
<td align="left">HFLU_1</td>
<td align="left">H. influenzae</td>
</tr>
<tr class="odd">
<td align="left">csf_hflu_1</td>
<td align="left">Cerebrospinal fluid sample</td>
<td align="left">HFLU_1</td>
<td align="left">H. influenzae</td>
</tr>
<tr class="even">
<td align="left">lung_hflu_1</td>
<td align="left">Tissue specimen from lung</td>
<td align="left">HFLU_1</td>
<td align="left">H. influenzae</td>
</tr>
<tr class="odd">
<td align="left">np_op_hflu_1</td>
<td align="left">Nasopharyngeal and Oropharyngeal swab</td>
<td align="left">HFLU_1</td>
<td align="left">H. influenzae</td>
</tr>
<tr class="even">
<td align="left">bld_hiat_1</td>
<td align="left">Whole blood</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="odd">
<td align="left">bld_sp_hiat_1</td>
<td align="left">Plasma or spun blood specimen</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="even">
<td align="left">csf_hiat_1</td>
<td align="left">Cerebrospinal fluid sample</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="odd">
<td align="left">lung_hiat_1</td>
<td align="left">Tissue specimen from lung</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="even">
<td align="left">np_op_hiat_1</td>
<td align="left">Nasopharyngeal and Oropharyngeal swab</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="odd">
<td align="left">bld_hitb_2</td>
<td align="left">Whole blood</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
<tr class="even">
<td align="left">bld_sp_hitb_2</td>
<td align="left">Plasma or spun blood specimen</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
<tr class="odd">
<td align="left">csf_hitb_2</td>
<td align="left">Cerebrospinal fluid sample</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
<tr class="even">
<td align="left">lung_hitb_2</td>
<td align="left">Tissue specimen from lung</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
<tr class="odd">
<td align="left">np_op_hitb_2</td>
<td align="left">Nasopharyngeal and Oropharyngeal swab</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
</tbody>
</table>
<p>The <em>H. influenza</em> in the <code>HFLU_1</code> is a ‘multi-target pattern’ defined by the positive-negative table in the researcher request section above. In other words, <code>HIAT_1</code> and <code>HITB_2</code> explain <code>HFLU_1</code>, so we don’t need to track that target.</p>
<div id="building-pathogen-present-tac-tabulations" class="section level3">
<h3 class="hasAnchor">
<a href="#building-pathogen-present-tac-tabulations" class="anchor"></a>Building pathogen present (TAC) tabulations</h3>
<p>We can build our present pathogen counts and ensure that our totals align with our <code>tac</code> subject count of 1473. From the table below, it looks like our counts total the correct amount. We are not interested in the double negative results, but the other three rows are of interest.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="kw">hiat_1_positive</span> <span class="op">&lt;-</span> <span class="kw">d</span><span class="op">$</span><span class="kw">tac_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">result</span> <span class="op">==</span> <span class="st">"Positive"</span>, <span class="kw">pathogen</span> <span class="op">==</span> <span class="st">"Haemophilus influenzae"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="kw">champs_deid</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>()

<span class="kw">hitb_2_positive</span> <span class="op">&lt;-</span> <span class="kw">d</span><span class="op">$</span><span class="kw">tac_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">result</span> <span class="op">==</span> <span class="st">"Positive"</span>, <span class="kw">pathogen</span> <span class="op">==</span> <span class="st">"Haemophilus influenzae type B"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="kw">champs_deid</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>()

<span class="co"># table tallies from TAC</span>
<span class="kw">positive_hiat_1_negative_hitb_2</span> <span class="op">&lt;-</span>  <span class="kw">hiat_1_positive</span>[<span class="op">!</span><span class="kw">hiat_1_positive</span> <span class="op">%in%</span> <span class="kw">hitb_2_positive</span>]
<span class="kw">positive_both</span> <span class="op">&lt;-</span> <span class="kw">hiat_1_positive</span>[<span class="kw">hiat_1_positive</span> <span class="op">%in%</span> <span class="kw">hitb_2_positive</span>]
<span class="kw">negative_hiat_1_positive_hitb_2</span> <span class="op">&lt;-</span> <span class="kw">hitb_2_positive</span>[<span class="op">!</span><span class="kw">hitb_2_positive</span> <span class="op">%in%</span> <span class="kw">hiat_1_positive</span>]
<span class="kw">negative_both</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="kw">d</span><span class="op">$</span><span class="kw">tac_long</span><span class="op">$</span><span class="kw">champs_deid</span>)[<span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="kw">d</span><span class="op">$</span><span class="kw">tac_long</span><span class="op">$</span><span class="kw">champs_deid</span>) <span class="op">%in%</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">positive_hiat_1_negative_hitb_2</span> , <span class="kw">positive_both</span>, <span class="kw">negative_hiat_1_positive_hitb_2</span>)]
</pre></div>
<table class="table">
<thead><tr class="header">
<th><strong>HIAT_1</strong></th>
<th><strong>HITB_2</strong></th>
<th><strong>Interpretation</strong></th>
<th><strong>Pathogen present (tac)</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Positive</td>
<td>Negative</td>
<td>
<em>H. influenzae</em> serotype A,B,C,D,E,F, or NT</td>
<td>293</td>
</tr>
<tr class="even">
<td>Positive</td>
<td>Positive</td>
<td>
<em>H. influenzae</em> serotype A or B</td>
<td>9</td>
</tr>
<tr class="odd">
<td>Negative</td>
<td>Positive</td>
<td>
<em>H. influenzae</em> serotype A or B</td>
<td>1</td>
</tr>
<tr class="even">
<td>Negative</td>
<td>Negative</td>
<td>Negative for <em>H. influenzae</em>
</td>
<td>1170</td>
</tr>
<tr class="odd">
<td><strong>Total</strong></td>
<td></td>
<td></td>
<td>1473</td>
</tr>
</tbody>
</table>
</div>
<div id="building-causal-chain-decode-tabulations" class="section level3">
<h3 class="hasAnchor">
<a href="#building-causal-chain-decode-tabulations" class="anchor"></a>Building causal chain (DeCoDe) tabulations</h3>
<p>Let’s look for the unique values in <code>champs_group_desc</code> and <code>etiol</code> from <code>dcd_long</code> related to <em>influenzae</em>. From the table below, we can see our two variables of interest under <code>eitol</code>. There appear to be 36 unique cases classified as having <em>Haemophilus influenzae</em> in their causal chain. We have no cases classified as <em>Haemophilus influenzae Type B</em> and we are not interested in <em>Haemophilus parainfluenzae</em> for this analysis.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">d</span><span class="op">$</span><span class="kw">dcd_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(<span class="kw">etiol</span>, <span class="st">"influenzae"</span>)) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw">champs_deid</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="kw">etiol</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(values = <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span>(), unique_cases = <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="kw">champs_deid</span>)), 
    types = <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="kw">type</span>), collapse = <span class="st">", "</span>), cgd_count = <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="kw">champs_group_desc</span>))) <span class="op">%&gt;%</span>
  <span class="kw">knitr</span>::<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(format = <span class="st">"markdown"</span>)
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
</pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="6%">
<col width="11%">
<col width="47%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">etiol</th>
<th align="right">values</th>
<th align="right">unique_cases</th>
<th align="left">types</th>
<th align="right">cgd_count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Haemophilus influenzae</td>
<td align="right">48</td>
<td align="right">36</td>
<td align="left">immediate_cause, morbid_condition, underlying_cause</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">Haemophilus parainfluenzae</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="left">underlying_cause, immediate_cause, morbid_condition</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Sometimes the capitalization and labeling are different from the <code>tac_long</code> pathogens as compared to the <code>dcd_long</code> values in <code>etiol</code>. It is essential to take note of any potential differences. Also, as the DeCoDe data has immediate and underlying causes, we may not have 36 unique cases with the <code>etiols</code> selected. The champs package includes a <code><a href="../reference/valid_conditions.html">valid_conditions()</a></code> function that can recreate the above code. It will check the <code>champs_group_description</code> as well.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="fu"><a href="../reference/valid_conditions.html">valid_conditions</a></span>(<span class="kw">d</span>), <span class="fu">function</span>(<span class="kw">x</span>) <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span>(<span class="kw">x</span>, <span class="st">"(i|I)nfluenzae"</span>))
<span class="co">#&gt; $champs_group_desc</span>
<span class="co">#&gt; character(0)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $etiol</span>
<span class="co">#&gt; [1] "Haemophilus influenzae"     "Haemophilus parainfluenzae"</span>
</pre></div>
<p>In our specific case, there are no causal cases with ‘Haemophilus influenzae’ and ‘Haemophilus influenzae Type B’. We can find the 36 cases with <em>Haemophilus influenzae</em>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="kw">hi_causal</span> <span class="op">&lt;-</span> <span class="kw">d</span><span class="op">$</span><span class="kw">dcd_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">etiol</span> <span class="op">==</span> <span class="st">"Haemophilus influenzae"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="kw">champs_deid</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>()

<span class="kw">hib_causal</span> <span class="op">&lt;-</span> <span class="kw">d</span><span class="op">$</span><span class="kw">dcd_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">etiol</span> <span class="op">==</span> <span class="st">"Haemophilus influenzae Type B"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="kw">champs_deid</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>()
</pre></div>
<p>Running <code><a href="https://rdrr.io/r/base/length.html">length(hi_causal)</a></code> returns 36 values while <code><a href="https://rdrr.io/r/base/length.html">length(hib_causal)</a></code> returns 0 values.</p>
</div>
<div id="exploring-the-36-haemophilus-influenzae-causal-cases" class="section level3">
<h3 class="hasAnchor">
<a href="#exploring-the-36-haemophilus-influenzae-causal-cases" class="anchor"></a>Exploring the 36 ‘Haemophilus influenzae’ causal cases</h3>
<p>We want to examine the 36 cases determined to have <em>Haemophilus influenzae</em> to see if any of those cases are potential Type B. We will examine the cases with our pathogens of interest from <code>tac_long</code> that we calculated above to see alignment with the DeCoDe causal classification.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="kw">hi_causal_phi_nhib</span> <span class="op">&lt;-</span> <span class="kw">positive_hiat_1_negative_hitb_2</span>[<span class="kw">positive_hiat_1_negative_hitb_2</span> <span class="op">%in%</span> <span class="kw">hi_causal</span>]
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="kw">hi_causal_phi_nhib</span>)
<span class="co">#&gt; [1] 35</span>
</pre></div>
<p>So we had 35 of the causal <em>Haemophilus influenzae</em> cases out of the 36 that had a positive <code>HIAT_1</code> and a negative <code>HITB_2</code> in their TAC. One case appears to have a positive <code>HITB_2</code>. We can check;</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="kw">hi_causal_pboth</span> <span class="op">&lt;-</span> <span class="kw">positive_both</span>[<span class="kw">positive_both</span> <span class="op">%in%</span> <span class="kw">hi_causal</span>]
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="kw">hi_causal_pboth</span>)
<span class="co">#&gt; [1] 1</span>
</pre></div>
<p>Here is the reported DeCoDe information for the one case that is <em>Haemophilus influenzae</em> causal and positive for both <code>HIAT_1</code> and <code>HITB_2</code>. We stored the <code>champs_deid</code> in the object <code>hi_causal_pboth</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="kw">d</span><span class="op">$</span><span class="kw">dcd_long</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">champs_deid</span> <span class="op">%in%</span> <span class="kw">hi_causal_pboth</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="kw">champs_group_desc</span>)) <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span><span class="kw">champs_deid</span>) <span class="op">%&gt;%</span>
  <span class="kw">knitr</span>::<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(format = <span class="st">"markdown"</span>)
</pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">champs_group_desc</th>
<th align="left">type</th>
<th align="left">etiol</th>
<th align="right">etiol_num</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Sepsis</td>
<td align="left">immediate_cause</td>
<td align="left">Haemophilus influenzae</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Sepsis</td>
<td align="left">immediate_cause</td>
<td align="left">NA</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Sepsis</td>
<td align="left">immediate_cause</td>
<td align="left">NA</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">Malnutrition</td>
<td align="left">underlying_cause</td>
<td align="left">NA</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Malnutrition</td>
<td align="left">underlying_cause</td>
<td align="left">NA</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">Malnutrition</td>
<td align="left">underlying_cause</td>
<td align="left">NA</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">Lower respiratory infections</td>
<td align="left">morbid_condition</td>
<td align="left">Haemophilus influenzae</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Lower respiratory infections</td>
<td align="left">morbid_condition</td>
<td align="left">NA</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Lower respiratory infections</td>
<td align="left">morbid_condition</td>
<td align="left">NA</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>That same case’s TAC data filtered to <code>pathogen</code>’s containing <em>influenzae</em> is shown below.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="kw">d</span><span class="op">$</span><span class="kw">tac_long</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">champs_deid</span> <span class="op">%in%</span> <span class="kw">hi_causal_pboth</span>, <span class="kw">result</span> <span class="op">==</span> <span class="st">"Positive"</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(<span class="kw">pathogen</span>, <span class="st">"influenzae"</span>)) <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span><span class="kw">champs_deid</span>) <span class="op">%&gt;%</span>
  <span class="kw">knitr</span>::<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(format = <span class="st">"markdown"</span>)
</pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="9%">
<col width="39%">
<col width="7%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">result</th>
<th align="left">specimen_type</th>
<th align="left">target</th>
<th align="left">pathogen</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">bld_hiat_1</td>
<td align="left">Positive</td>
<td align="left">Whole blood</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="even">
<td align="left">bld_hitb_2</td>
<td align="left">Positive</td>
<td align="left">Whole blood</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
<tr class="odd">
<td align="left">lung_hiat_1</td>
<td align="left">Positive</td>
<td align="left">Tissue specimen from lung</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="even">
<td align="left">lung_hitb_2</td>
<td align="left">Positive</td>
<td align="left">Tissue specimen from lung</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
<tr class="odd">
<td align="left">np_op_hiat_1</td>
<td align="left">Positive</td>
<td align="left">Nasopharyngeal and Oropharyngeal swab</td>
<td align="left">HIAT_1</td>
<td align="left">Haemophilus influenzae</td>
</tr>
<tr class="even">
<td align="left">np_op_hitb_2</td>
<td align="left">Positive</td>
<td align="left">Nasopharyngeal and Oropharyngeal swab</td>
<td align="left">HITB_2</td>
<td align="left">Haemophilus influenzae type B</td>
</tr>
</tbody>
</table>
</div>
<div id="exploring-the-9-hiat_1-and-hitb_2-positve-cases" class="section level3">
<h3 class="hasAnchor">
<a href="#exploring-the-9-hiat_1-and-hitb_2-positve-cases" class="anchor"></a>Exploring the 9 <code>HIAT_1</code> and <code>HITB_2</code> positve cases</h3>
<p>We discussed one of the nine cases in the previous section. What did the other 8 cases with positive <code>HIAT_1</code> and <code>HITB_2</code> have in their casual chain?</p>
<p>For convenience, to remove the long <code>champs_deid</code>, we will define a function that replaces the ID with a unique numeric label, which we will use in several of the following code blocks.</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="kw">recode_champs_deid</span> <span class="op">&lt;-</span> <span class="fu">function</span>(<span class="kw">x</span>) {
  <span class="kw">x</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(champs_case = <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw">champs_deid</span>) <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>()) <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span><span class="kw">champs_deid</span>) <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw">champs_case</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span>()) <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw">champs_case</span>)
}
</pre></div>
<p>We can find the dual positive TAC with no <em>Haemophilus influenzae</em> in the causal chain with an <code>etiol</code> reported (<code>tac_pboth_nhic</code>) and then look at the DeCoDe results.</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="kw">tac_pboth_nhic</span> <span class="op">&lt;-</span> <span class="kw">d</span><span class="op">$</span><span class="kw">dcd_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">champs_deid</span> <span class="op">%in%</span> <span class="kw">positive_both</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="kw">etiol</span>)) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="kw">champs_deid</span>) <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>()

<span class="kw">d</span><span class="op">$</span><span class="kw">dcd_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">champs_deid</span> <span class="op">%in%</span> <span class="kw">tac_pboth_nhic</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="kw">etiol</span>))<span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">champs_deid</span> != <span class="kw">hi_causal_pboth</span>) <span class="op">%&gt;%</span>
  <span class="fu">recode_champs_deid</span>() <span class="op">%&gt;%</span>
  <span class="kw">knitr</span>::<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(format = <span class="st">"markdown"</span>)
</pre></div>
<table class="table">
<colgroup>
<col width="10%">
<col width="25%">
<col width="15%">
<col width="39%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="right">champs_case</th>
<th align="left">champs_group_desc</th>
<th align="left">type</th>
<th align="left">etiol</th>
<th align="right">etiol_num</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Malaria</td>
<td align="left">underlying_cause</td>
<td align="left">Plasmodium falciparum</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Malaria</td>
<td align="left">underlying_cause</td>
<td align="left">Plasmodium falciparum</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Sepsis</td>
<td align="left">immediate_cause</td>
<td align="left">Escherichia coli</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">Sepsis</td>
<td align="left">immediate_cause</td>
<td align="left">Candida albicans</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Sepsis</td>
<td align="left">immediate_cause</td>
<td align="left">Pseudomonas aeruginosa</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">HIV</td>
<td align="left">underlying_cause</td>
<td align="left">Human Immunodeficiency Virus (HIV)</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Lower respiratory infections</td>
<td align="left">morbid_condition</td>
<td align="left">Candida albicans</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">Lower respiratory infections</td>
<td align="left">morbid_condition</td>
<td align="left">Pseudomonas aeruginosa</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Lower respiratory infections</td>
<td align="left">morbid_condition</td>
<td align="left">Klebsiella pneumoniae</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Diarrheal Diseases</td>
<td align="left">immediate_cause</td>
<td align="left">Escherichia coli</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">Diarrheal Diseases</td>
<td align="left">immediate_cause</td>
<td align="left">Shigella</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Diarrheal Diseases</td>
<td align="left">underlying_cause</td>
<td align="left">Escherichia coli</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">Diarrheal Diseases</td>
<td align="left">underlying_cause</td>
<td align="left">Shigella</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left">Lower respiratory infections</td>
<td align="left">immediate_cause</td>
<td align="left">Salmonella enterica sub-species paratyphi A</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="left">Lower respiratory infections</td>
<td align="left">immediate_cause</td>
<td align="left">Other Etiology/Agent</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Lower respiratory infections</td>
<td align="left">immediate_cause</td>
<td align="left">Cytomegalovirus (CMV)</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="left">HIV</td>
<td align="left">underlying_cause</td>
<td align="left">Other Etiology/Agent</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="left">Malaria</td>
<td align="left">underlying_cause</td>
<td align="left">Plasmodium falciparum</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Notice that there are only 7 cases in the TAC data table shown above. We expected to have eight cases after removing the one case in <code>hi_causal_pboth</code>. Let’s look at the missing case and see why it is not in our above table.</p>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="kw">d</span><span class="op">$</span><span class="kw">dcd_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">champs_deid</span> <span class="op">%in%</span> <span class="kw">positive_both</span>[<span class="op">!</span><span class="kw">positive_both</span> <span class="op">%in%</span> <span class="kw">tac_pboth_nhic</span>], <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="kw">champs_group_desc</span>)) <span class="op">%&gt;%</span>
  <span class="fu">recode_champs_deid</span>() <span class="op">%&gt;%</span>
  <span class="kw">knitr</span>::<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(format = <span class="st">"markdown"</span>)
</pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">champs_case</th>
<th align="left">champs_group_desc</th>
<th align="left">type</th>
<th align="left">etiol</th>
<th align="right">etiol_num</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Undetermined</td>
<td align="left">underlying_cause</td>
<td align="left">NA</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Undetermined</td>
<td align="left">underlying_cause</td>
<td align="left">NA</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">Undetermined</td>
<td align="left">underlying_cause</td>
<td align="left">NA</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>This could be a potential <em>Haemophilus influenzae Type B</em> causal case based on the double-positive in the TAC data for <code>HIAT_1</code> and <code>HITB_2</code> and the DeCoDe board’s non-determination. Finally, we have two cases that we could recommend for inclusion in the <em>Haemophilus influenzae Type B</em> causal group.</p>
<p>One other important note is that the <code>champs_group_desc</code> had the pertinent information needed to determine the causal description for this case and that the respective <code>etiol</code> was <code>NA</code>. We need to be careful filtering out missing values in <code>etiol</code>, which is what we did in the table of seven cases.</p>
</div>
</div>
<div id="checking-our-counts-with-calc_-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#checking-our-counts-with-calc_-functions" class="anchor"></a>Checking our counts with <code>calc_</code> functions</h2>
<p>Our calculations above were not broken down by site or age, but we can use the validated <code>calc_</code> functions to check our results using the marginal totals.</p>
<div id="pathogen-presence-of-haemophilus-influenzae" class="section level3">
<h3 class="hasAnchor">
<a href="#pathogen-presence-of-haemophilus-influenzae" class="anchor"></a>Pathogen presence of ‘Haemophilus influenzae’</h3>
<p>We reported 302 cases and can check those values against the <code><a href="../reference/calc_cc_detected_by_site_age.html">calc_cc_detected_by_site_age()</a></code></p>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="kw">calc_detected_HIAT_1_wc_hi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_cc_detected_by_site_age.html">calc_cc_detected_by_site_age</a></span>(<span class="kw">d</span>, 
  condition = <span class="st">"Haemophilus influenzae"</span>, 
  pathogen = <span class="st">"Haemophilus influenzae"</span>,
  specimen_types = <span class="fu"><a href="../reference/valid_specimen_types.html">valid_specimen_types</a></span>(<span class="kw">d</span>),
  sites = <span class="fu"><a href="../reference/valid_sites.html">valid_sites</a></span>(<span class="kw">d</span>))
<span class="kw">calc_detected_HIAT_1_wc_hi</span><span class="op">$</span><span class="kw">denominator</span> <span class="op">%&gt;%</span> <span class="kw">knitr</span>::<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(format = <span class="st">"markdown"</span>)
</pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">Bangladesh</th>
<th align="right">Kenya</th>
<th align="right">Mali</th>
<th align="right">Mozambique</th>
<th align="right">South Africa</th>
<th align="right">Ethiopia</th>
<th align="right">Sierra Leone</th>
<th align="right">Sum</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Stillbirth</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">Death in the first 24 hours</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Early Neonate (1 to 6 days)</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">Late Neonate (7 to 27 days)</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">Infant (28 days to less than 12 months)</td>
<td align="right">2</td>
<td align="right">41</td>
<td align="right">15</td>
<td align="right">11</td>
<td align="right">31</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">105</td>
</tr>
<tr class="even">
<td align="left">Child (12 months to less than 60 Months)</td>
<td align="right">0</td>
<td align="right">60</td>
<td align="right">12</td>
<td align="right">28</td>
<td align="right">34</td>
<td align="right">6</td>
<td align="right">12</td>
<td align="right">152</td>
</tr>
<tr class="odd">
<td align="left">Sum</td>
<td align="right">8</td>
<td align="right">110</td>
<td align="right">29</td>
<td align="right">44</td>
<td align="right">78</td>
<td align="right">12</td>
<td align="right">21</td>
<td align="right">302</td>
</tr>
</tbody>
</table>
</div>
<div id="pathogen-presence-of-haemophilus-influenzae-type-b" class="section level3">
<h3 class="hasAnchor">
<a href="#pathogen-presence-of-haemophilus-influenzae-type-b" class="anchor"></a>Pathogen presence of ‘Haemophilus influenzae type B’</h3>
<p>We reported 10 cases. We can see that marginal total below.</p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="kw">calc_detected_HITB_2_wc_hib</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_cc_detected_by_site_age.html">calc_cc_detected_by_site_age</a></span>(<span class="kw">d</span>, 
  condition = <span class="st">"Haemophilus influenzae"</span>, 
  pathogen = <span class="st">"Haemophilus influenzae type B"</span>,
  specimen_types = <span class="fu"><a href="../reference/valid_specimen_types.html">valid_specimen_types</a></span>(<span class="kw">d</span>),
  sites = <span class="fu"><a href="../reference/valid_sites.html">valid_sites</a></span>(<span class="kw">d</span>))
<span class="kw">calc_detected_HITB_2_wc_hib</span><span class="op">$</span><span class="kw">denominator</span> <span class="op">%&gt;%</span> <span class="kw">knitr</span>::<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(format = <span class="st">"markdown"</span>)
</pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">Bangladesh</th>
<th align="right">Kenya</th>
<th align="right">Mali</th>
<th align="right">Mozambique</th>
<th align="right">South Africa</th>
<th align="right">Ethiopia</th>
<th align="right">Sierra Leone</th>
<th align="right">Sum</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Stillbirth</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Death in the first 24 hours</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Early Neonate (1 to 6 days)</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Late Neonate (7 to 27 days)</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Infant (28 days to less than 12 months)</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Child (12 months to less than 60 Months)</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Sum</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">10</td>
</tr>
</tbody>
</table>
<div id="causal-presence-of-haemophilus-influenzae" class="section level4">
<h4 class="hasAnchor">
<a href="#causal-presence-of-haemophilus-influenzae" class="anchor"></a>Causal presence of ‘Haemophilus influenzae’</h4>
<p>We reported 36 cases and can see that value in the marginal totals.</p>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="kw">calc_causal_hi_only</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_cc_allcases_by_site_age.html">calc_cc_allcases_by_site_age</a></span>(<span class="kw">d</span>, condition = <span class="st">"Haemophilus influenzae"</span>, sites = <span class="fu"><a href="../reference/valid_sites.html">valid_sites</a></span>(<span class="kw">d</span>))
<span class="kw">calc_causal_hi_only</span><span class="op">$</span><span class="kw">numerator</span> <span class="op">%&gt;%</span> <span class="kw">knitr</span>::<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(format = <span class="st">"markdown"</span>)
</pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">Bangladesh</th>
<th align="right">Kenya</th>
<th align="right">Mali</th>
<th align="right">Mozambique</th>
<th align="right">South Africa</th>
<th align="right">Ethiopia</th>
<th align="right">Sierra Leone</th>
<th align="right">Sum</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Stillbirth</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Death in the first 24 hours</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Early Neonate (1 to 6 days)</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Late Neonate (7 to 27 days)</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Infant (28 days to less than 12 months)</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">Child (12 months to less than 60 Months)</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">19</td>
</tr>
<tr class="odd">
<td align="left">Sum</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">15</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">36</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ryan Hafen, J Hathaway.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
